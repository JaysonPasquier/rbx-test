-- Rift Scanner - MOBILE PERFECT + RESPONSIVE SCALE
-- Adapts to ANY screen size + Always centered

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "RiftScanner"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.IgnoreGuiInset = true  -- Full screen access
ScreenGui.Parent = PlayerGui

-- RESPONSIVE Mini Button ðŸŒ€ (0.08 of screen width)
local MiniBtn = Instance.new("TextButton")
MiniBtn.Size = UDim2.new(0.08, 0, 0.08, 0)
MiniBtn.Position = UDim2.new(1, -0.08, 0.05, 0)
MiniBtn.AnchorPoint = Vector2.new(1, 0)
MiniBtn.BackgroundColor3 = Color3.fromRGB(50, 150, 255)
MiniBtn.Text = "ðŸŒ€"
MiniBtn.TextColor3 = Color3.new(1,1,1)
MiniBtn.TextScaled = true
MiniBtn.Font = Enum.Font.GothamBold
MiniBtn.Active = true
MiniBtn.Draggable = true
MiniBtn.Parent = ScreenGui

local MiniCorner = Instance.new("UICorner")
MiniCorner.CornerRadius = UDim.new(1, 0)
MiniCorner.Parent = MiniBtn

-- RESPONSIVE Main Frame (80% width, 70% height)
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0.85, 0, 0.75, 0)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)  -- ALWAYS CENTERED
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Visible = false
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 16)
MainCorner.Parent = MainFrame

-- TOP HEADER (full width)
local Header = Instance.new("Frame")
Header.Size = UDim2.new(1, 0, 0, 50)
Header.Position = UDim2.new(0, 0, 0, 0)
Header.BackgroundColor3 = Color3.fromRGB(45, 45, 65)
Header.Parent = MainFrame

local HeaderCorner = Instance.new("UICorner", Header)
HeaderCorner.CornerRadius = UDim.new(0, 16)

local HeaderLabel = Instance.new("TextLabel")
HeaderLabel.Size = UDim2.new(1, -70, 1, 0)
HeaderLabel.Position = UDim2.new(0, 15, 0, 0)
HeaderLabel.BackgroundTransparency = 1
HeaderLabel.Text = "ðŸŒ€ ACTIVE RIFTS"
HeaderLabel.TextColor3 = Color3.new(1,1,1)
HeaderLabel.TextScaled = true
HeaderLabel.Font = Enum.Font.GothamBold
HeaderLabel.Parent = Header

-- CLOSE BUTTON (top right)
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 40, 0, 40)
CloseBtn.Position = UDim2.new(1, -50, 0, 5)
CloseBtn.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
CloseBtn.Text = "âœ•"
CloseBtn.TextColor3 = Color3.new(1,1,1)
CloseBtn.TextScaled = true
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.Active = true
CloseBtn.Parent = Header

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 10)
CloseCorner.Parent = CloseBtn

-- LEFT SIDEBAR (20% width)
local Sidebar = Instance.new("Frame")
Sidebar.Size = UDim2.new(0.22, 0, 1, -60)
Sidebar.Position = UDim2.new(0, 0, 0, 50)
Sidebar.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
Sidebar.BorderSizePixel = 0
Sidebar.Parent = MainFrame

local SidebarCorner = Instance.new("UICorner", Sidebar)
SidebarCorner.CornerRadius = UDim.new(0, 12)

local SidebarLayout = Instance.new("UIListLayout")
SidebarLayout.Padding = UDim.new(0, 8)
SidebarLayout.VerticalAlignment = Enum.VerticalAlignment.Center
SidebarLayout.Parent = Sidebar

-- MAIN CONTENT (78% width)
local ContentArea = Instance.new("Frame")
ContentArea.Size = UDim2.new(0.78, 0, 1, -60)
ContentArea.Position = UDim2.new(0.22, 0, 0, 50)
ContentArea.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
ContentArea.BorderSizePixel = 0
ContentArea.Parent = MainFrame

local ContentCorner = Instance.new("UICorner", ContentArea)
ContentCorner.CornerRadius = UDim.new(0, 12)

-- RIFTS SCROLLFRAME
local RiftScroll = Instance.new("ScrollingFrame")
RiftScroll.Size = UDim2.new(1, -12, 1, -12)
RiftScroll.Position = UDim2.new(0, 6, 0, 6)
RiftScroll.BackgroundTransparency = 1
RiftScroll.ScrollBarThickness = 6
RiftScroll.ScrollBarImageColor3 = Color3.fromRGB(100, 150, 255)
RiftScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
RiftScroll.Parent = ContentArea

local RiftLayout = Instance.new("UIListLayout")
RiftLayout.Padding = UDim.new(0, 6)
RiftLayout.SortOrder = Enum.SortOrder.LayoutOrder
RiftLayout.Parent = RiftScroll

-- LEFT TABS (2 buttons)
local tabs = {"RIFTS", "INFO"}
local currentTab = "RIFTS"

for i, tabName in ipairs(tabs) do
    local TabBtn = Instance.new("TextButton")
    TabBtn.Size = UDim2.new(0.9, 0, 0.22, 0)
    TabBtn.Position = UDim2.new(0.05, 0, (i-1)*0.28, 0)
    TabBtn.BackgroundColor3 = tabName == "RIFTS" and Color3.fromRGB(70, 150, 255) or Color3.fromRGB(55, 55, 75)
    TabBtn.Text = tabName
    TabBtn.TextColor3 = Color3.new(1,1,1)
    TabBtn.TextScaled = true
    TabBtn.Font = Enum.Font.GothamBold
    TabBtn.Active = true
    TabBtn.Parent = Sidebar
    
    local TabCorner = Instance.new("UICorner")
    TabCorner.CornerRadius = UDim.new(0, 10)
    TabCorner.Parent = TabBtn
    
    TabBtn.MouseButton1Click:Connect(function()
        currentTab = tabName
        
        -- Update tab colors
        for _, child in pairs(Sidebar:GetChildren()) do
            if child:IsA("TextButton") then
                child.BackgroundColor3 = Color3.fromRGB(55, 55, 75)
            end
        end
        TabBtn.BackgroundColor3 = Color3.fromRGB(70, 150, 255)
        
        if tabName == "INFO" then
            -- Show info
            for _, child in pairs(RiftScroll:GetChildren()) do
                if child:IsA("GuiObject") and child ~= RiftLayout then
                    child:Destroy()
                end
            end
            RiftScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
        else
            updateRiftList()
        end
    end)
end

-- RIFT DATA
local ActiveRifts = {}
local HumanoidRootPart = nil

LocalPlayer.CharacterAdded:Connect(function(char)
    HumanoidRootPart = char:WaitForChild("HumanoidRootPart")
end)
if LocalPlayer.Character then
    HumanoidRootPart = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
end

local function getEggPlatformSpawn(riftModel)
    local platform = riftModel:FindFirstChild("EggPlatformSpawn")
    if platform then
        local children = platform:GetChildren()
        if #children >= 4 and children[4]:IsA("BasePart") then
            return children[4]
        elseif platform.PrimaryPart then
            return platform.PrimaryPart
        else
            for _, child in pairs(platform:GetChildren()) do
                if child:IsA("BasePart") then return child end
            end
        end
    end
    return nil
end

local function parseRiftLuck(riftModel)
    local luck = "?"
    local display = riftModel:FindFirstChild("Display")
    if display and display:FindFirstChild("SurfaceGui") then
        for _, child in pairs(display.SurfaceGui:GetDescendants()) do
            if child:IsA("TextLabel") and child.Name == "Luck" then
                luck = child.Text
                break
            end
        end
    end
    return luck
end

function updateRiftList()
    ActiveRifts = {}
    
    local riftsFolder = workspace:FindFirstChild("Rendered") 
        and workspace.Rendered:FindFirstChild("Rifts")
    if not riftsFolder then return end
    
    -- Clear list
    for _, child in pairs(RiftScroll:GetChildren()) do
        if child:IsA("GuiObject") and child ~= RiftLayout then
            child:Destroy()
        end
    end
    
    for _, riftModel in pairs(riftsFolder:GetChildren()) do
        local platform = getEggPlatformSpawn(riftModel)
        if platform then
            local luck = parseRiftLuck(riftModel)
            local distance = HumanoidRootPart and (platform.Position - HumanoidRootPart.Position).Magnitude or 999
            
            -- RIFT BUTTON
            local RiftBtn = Instance.new("TextButton")
            RiftBtn.Size = UDim2.new(1, 0, 0, 65)
            RiftBtn.BackgroundColor3 = Color3.fromRGB(55, 75, 120)
            RiftBtn.Text = ""
            RiftBtn.Active = true
            RiftBtn.Parent = RiftScroll
            
            local RiftCorner = Instance.new("UICorner")
            RiftCorner.CornerRadius = UDim.new(0, 12)
            RiftCorner.Parent = RiftBtn
            
            -- ICON
            local Icon = Instance.new("TextLabel")
            Icon.Size = UDim2.new(0, 55, 0, 55)
            Icon.Position = UDim2.new(0, 12, 0.5, -27.5)
            Icon.AnchorPoint = Vector2.new(0, 0.5)
            Icon.BackgroundColor3 = Color3.fromRGB(70, 90, 140)
            Icon.Text = "ðŸ¥š"
            Icon.TextColor3 = Color3.new(1,1,1)
            Icon.TextScaled = true
            Icon.Font = Enum.Font.GothamBold
            Icon.Parent = RiftBtn
            
            local IconCorner = Instance.new("UICorner")
            IconCorner.CornerRadius = UDim.new(1, 0)
            IconCorner.Parent = Icon
            
            -- NAME (left)
            local NameLabel = Instance.new("TextLabel")
            NameLabel.Size = UDim2.new(0.5, -10, 0.5, 0)
            NameLabel.Position = UDim2.new(0, 75, 0.25, 0)
            NameLabel.BackgroundTransparency = 1
            NameLabel.Text = riftModel.Name
            NameLabel.TextColor3 = Color3.new(1,1,1)
            NameLabel.TextScaled = true
            NameLabel.Font = Enum.Font.GothamBold
            NameLabel.TextXAlignment = Enum.TextXAlignment.Left
            NameLabel.Parent = RiftBtn
            
            -- LUCK + DIST (right)
            local InfoLabel = Instance.new("TextLabel")
            InfoLabel.Size = UDim2.new(0.45, -10, 0.5, 0)
            InfoLabel.Position = UDim2.new(0.52, 0, 0.25, 0)
            InfoLabel.BackgroundTransparency = 1
            InfoLabel.Text = luck .. "\n" .. math.floor(distance) .. "m"
            InfoLabel.TextColor3 = Color3.fromRGB(150, 255, 150)
            InfoLabel.TextScaled = true
            InfoLabel.Font = Enum.Font.Gotham
            InfoLabel.TextXAlignment = Enum.TextXAlignment.Right
            InfoLabel.Parent = RiftBtn
            
            -- TELEPORT
            RiftBtn.MouseButton1Click:Connect(function()
                if platform and HumanoidRootPart then
                    HumanoidRootPart.CFrame = CFrame.new(platform.Position + Vector3.new(0, 8, 0))
                end
            end)
        end
    end
end

-- EVENTS
MiniBtn.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
end)

CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- AUTO UPDATE
spawn(function()
    while ScreenGui.Parent do
        if currentTab == "RIFTS" then
            updateRiftList()
        end
        wait(1)
    end
end)

print("ðŸŒ€ Mobile Rift Scanner LOADED - Perfect scale + Always centered!")
